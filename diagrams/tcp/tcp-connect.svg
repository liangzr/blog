<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="438px" preserveAspectRatio="none" style="width:639px;height:438px;" version="1.1" viewBox="0 0 639 438" width="639px" zoomAndPan="magnify"><defs><filter height="300%" id="f1f85gtlzlib5y" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="267.25" y="37.6357">TCP 握手协议</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="258" x2="258" y1="131.2344" y2="329.1641"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="366" x2="366" y1="131.2344" y2="329.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="237" y="127.9326">client</text><ellipse cx="258.5" cy="57.9375" fill="#FEFECE" filter="url(#f1f85gtlzlib5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M258.5,65.9375 L258.5,92.9375 M245.5,73.9375 L271.5,73.9375 M258.5,92.9375 L245.5,107.9375 M258.5,92.9375 L271.5,107.9375 " fill="none" filter="url(#f1f85gtlzlib5y)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="37" x="237" y="341.1592">client</text><ellipse cx="258.5" cy="354.4609" fill="#FEFECE" filter="url(#f1f85gtlzlib5y)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M258.5,362.4609 L258.5,389.4609 M245.5,370.4609 L271.5,370.4609 M258.5,389.4609 L245.5,404.4609 M258.5,389.4609 L271.5,404.4609 " fill="none" filter="url(#f1f85gtlzlib5y)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1f85gtlzlib5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="336" y="95.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="343" y="115.9326">server</text><rect fill="#FEFECE" filter="url(#f1f85gtlzlib5y)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="336" y="328.1641"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="343" y="348.1592">server</text><polygon fill="#A80036" points="354.5,170.9336,364.5,174.9336,354.5,178.9336,358.5,174.9336" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258.5" x2="360.5" y1="174.9336" y2="174.9336"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="265.5" y="169.8677">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="278.5" y="169.8677">SYN</text><path d="M8,146.2344 L8,186.2344 L250,186.2344 L250,156.2344 L240,146.2344 L8,146.2344 " fill="#FBFB77" filter="url(#f1f85gtlzlib5y)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240,146.2344 L240,156.2344 L250,156.2344 L240,146.2344 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="14" y="163.3013">客户端向服务端发送连接请求报文段，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="14" y="178.4341">该报文段包含自身的数据通讯初始序号</text><polygon fill="#A80036" points="269.5,232.7656,259.5,236.7656,269.5,240.7656,265.5,236.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="263.5" x2="365.5" y1="236.7656" y2="236.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="275.5" y="231.6997">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="288.5" y="231.6997">SYN + ACK</text><path d="M371,200.5 L371,255.5 L613,255.5 L613,210.5 L603,200.5 L371,200.5 " fill="#FBFB77" filter="url(#f1f85gtlzlib5y)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M603,200.5 L603,210.5 L613,210.5 L603,200.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="377" y="217.5669">服务端收到连接请求报文段后，如果同</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="377" y="232.6997">意连接，刚会发送一个应答，该应答中</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="377" y="247.8325">也会包含自身的数据通讯初始序号</text><polygon fill="#A80036" points="354.5,294.5977,364.5,298.5977,354.5,302.5977,358.5,298.5977" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="258.5" x2="360.5" y1="298.5977" y2="298.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="265.5" y="293.5317">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="278.5" y="293.5317">ACK</text><path d="M8,269.8984 L8,309.8984 L250,309.8984 L250,279.8984 L240,269.8984 L8,269.8984 " fill="#FBFB77" filter="url(#f1f85gtlzlib5y)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M240,269.8984 L240,279.8984 L250,279.8984 L240,269.8984 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="14" y="286.9653">客户端收到连接同意的应答后，还要向</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="14" y="302.0981">服务端发送一个确认报文</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="56" x="571.5" y="12.2822">overloading</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacingAndGlyphs" textLength="79" x="275.75" y="424.7432">copyright liangzr</text><!--
@startuml
header overloading
footer copyright liangzr

title TCP 握手协议

actor client 

participant server order 2
participant client order 1

autonumber
client -> server : SYN
note left
  客户端向服务端发送连接请求报文段，
  该报文段包含自身的数据通讯初始序号
end note

server -> client : SYN + ACK
note right
  服务端收到连接请求报文段后，如果同
  意连接，刚会发送一个应答，该应答中
  也会包含自身的数据通讯初始序号
end note

client -> server : ACK
note left
  客户端收到连接同意的应答后，还要向
  服务端发送一个确认报文
end note
@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
OS Version: 3.10.0-957.1.3.el7.x86_64
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>