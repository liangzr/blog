<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="849px" preserveAspectRatio="none" style="width:580px;height:849px;" version="1.1" viewBox="0 0 580 849" width="580px" zoomAndPan="magnify"><defs><filter height="300%" id="f604pld7cryi4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M10,10 L10,65.3984 L128,65.3984 L128,20 L118,10 L10,10 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M118,10 L118,20 L128,20 L118,10 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="16" y="27.0669">&#128308;不可 setState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="16" y="42.1997">✅可以 setState</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="16" y="57.3325">&#127744;合并 setState</text><ellipse cx="158" cy="37.6992" fill="#000000" filter="url(#f604pld7cryi4)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#f604pld7cryi4)" height="310.5859" style="stroke: #000000; stroke-width: 2.0;" width="478" x="69.5" y="76.2002"/><path d="M145.5,77.2002 L145.5,85.4971 L135.5,95.4971 L69.5,95.4971 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="66" x="72.5" y="90.1953">MOUTING</text><path d="M242.5,112.3486 L242.5,152.6143 L419.5,152.6143 L419.5,122.3486 L409.5,112.3486 L242.5,112.3486 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M409.5,112.3486 L409.5,122.3486 L419.5,122.3486 L409.5,112.3486 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="248.5" y="129.4155">只在初始化组件元素时调用</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="248.5" y="144.5483">所以只执行一次</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="129" x="93.5" y="115.4971"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="109" x="103.5" y="136.6357">&#128308;getDefaultProps</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="102" y="172.6143"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="112" y="193.7529">&#128308;getIntialState</text><path d="M256.5,223.4346 L256.5,263.7002 L462.5,263.7002 L462.5,233.4346 L452.5,223.4346 L256.5,223.4346 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M452.5,223.4346 L452.5,233.4346 L462.5,233.4346 L452.5,223.4346 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="262.5" y="240.5015">初始化 state 等操作</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="262.5" y="255.6343">建议都在 constructor 中做处理</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="79.5" y="226.583"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="89.5" y="247.7217">&#127744;componentWillMount</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="123.5" y="283.7002"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="133.5" y="304.8389">&#128308;render</text><path d="M256.5,334.5205 L256.5,374.7861 L537.5,374.7861 L537.5,344.5205 L527.5,334.5205 L256.5,334.5205 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M527.5,334.5205 L527.5,344.5205 L537.5,344.5205 L527.5,334.5205 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="260" x="262.5" y="351.5874">有些例如获取 DOM 元素的位置等操作只有在</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="262.5" y="366.7202">渲染之后才能得到，可以在这里做处理</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="79.5" y="337.6689"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="89.5" y="358.8076">✅componentDidMount</text><rect fill="#FFFFFF" filter="url(#f604pld7cryi4)" height="301.2891" style="stroke: #000000; stroke-width: 2.0;" width="522.5" x="47" y="397.5879"/><path d="M169,398.5879 L169,406.8848 L159,416.8848 L47,416.8848 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="50" y="411.583">RECEIVE-PROPS</text><path d="M279,438.3027 L279,463.4355 L525,463.4355 L525,448.3027 L515,438.3027 L279,438.3027 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M515,438.3027 L515,448.3027 L525,448.3027 L515,438.3027 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="285" y="455.3696">可以用来处理props改变时，更新state</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="57" y="433.8848"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="182" x="67" y="455.0234">&#127744;componentWillReceiveProps</text><path d="M271.5,484.7051 L271.5,524.9707 L559.5,524.9707 L559.5,494.7051 L549.5,484.7051 L271.5,484.7051 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M549.5,484.7051 L549.5,494.7051 L559.5,494.7051 L549.5,484.7051 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="267" x="277.5" y="501.772">返回 true 或 false 来决定组件是否要重新渲染</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="277.5" y="516.9048">但不管是否重新渲染，属性状态都会更新</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="64.5" y="487.8535"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="74.5" y="508.9922">&#128308;shouleComponentUpdate</text><path d="M260,549.3887 L260,574.5215 L463,574.5215 L463,559.3887 L453,549.3887 L260,549.3887 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M453,549.3887 L453,559.3887 L463,559.3887 L453,549.3887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="266" y="566.4556">在更新之前对组件的状态做保存</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="76" y="544.9707"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="86" y="566.1094">&#128308;componentWillUpdate</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="69" x="123.5" y="598.9395"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="49" x="133.5" y="620.0781">&#128308;render</text><path d="M260,657.3262 L260,682.459 L445,682.459 L445,667.3262 L435,657.3262 L260,657.3262 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M435,657.3262 L435,667.3262 L445,667.3262 L435,657.3262 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="266" y="674.3931">类似 componentDidMount</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="76" y="652.9082"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="86" y="674.0469">✅componentDidUpdate</text><rect fill="#FFFFFF" filter="url(#f604pld7cryi4)" height="88.4141" style="stroke: #000000; stroke-width: 2.0;" width="483" x="60.5" y="709.6787"/><path d="M166.5,710.6787 L166.5,718.9756 L156.5,728.9756 L60.5,728.9756 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="63.5" y="723.6738">UNMOUNTING</text><path d="M265.5,745.8271 L265.5,786.0928 L533.5,786.0928 L533.5,755.8271 L523.5,745.8271 L265.5,745.8271 " fill="#FBFB77" filter="url(#f604pld7cryi4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M523.5,745.8271 L523.5,755.8271 L533.5,755.8271 L523.5,745.8271 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="271.5" y="762.894">可以在这个方法中进行取消事件监听等操作</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="271.5" y="778.0269">避免内存泄漏</text><rect fill="#82F49C" filter="url(#f604pld7cryi4)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="70.5" y="748.9756"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="80.5" y="770.1143">&#128308;componentWillUnmount</text><ellipse cx="158" cy="828.0928" fill="#FFFFFF" filter="url(#f604pld7cryi4)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="151.8128" x2="164.1872" y1="821.9056" y2="834.28"/><line style="stroke: #000000; stroke-width: 2.5;" x1="164.1872" x2="151.8128" y1="821.9056" y2="834.28"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="149.4658" y2="172.6143"/><polygon fill="#A80036" points="154,162.6143,158,172.6143,162,162.6143,158,166.6143" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="206.583" y2="226.583"/><polygon fill="#A80036" points="154,216.583,158,226.583,162,216.583,158,220.583" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="260.5518" y2="283.7002"/><polygon fill="#A80036" points="154,273.7002,158,283.7002,162,273.7002,158,277.7002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="317.6689" y2="337.6689"/><polygon fill="#A80036" points="154,327.6689,158,337.6689,162,327.6689,158,331.6689" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="47.6992" y2="115.4971"/><polygon fill="#A80036" points="154,105.4971,158,115.4971,162,105.4971,158,109.4971" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="467.8535" y2="487.8535"/><polygon fill="#A80036" points="154,477.8535,158,487.8535,162,477.8535,158,481.8535" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="521.8223" y2="544.9707"/><polygon fill="#A80036" points="154,534.9707,158,544.9707,162,534.9707,158,538.9707" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="578.9395" y2="598.9395"/><polygon fill="#A80036" points="154,588.9395,158,598.9395,162,588.9395,158,592.9395" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="632.9082" y2="652.9082"/><polygon fill="#A80036" points="154,642.9082,158,652.9082,162,642.9082,158,646.9082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="371.6377" y2="433.8848"/><polygon fill="#A80036" points="154,423.8848,158,433.8848,162,423.8848,158,427.8848" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="686.877" y2="748.9756"/><polygon fill="#A80036" points="154,738.9756,158,748.9756,162,738.9756,158,742.9756" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="158" x2="158" y1="782.9443" y2="818.0928"/><polygon fill="#A80036" points="154,808.0928,158,818.0928,162,808.0928,158,812.0928" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
start

floating note left
 🔴不可 setState 
 ✅可以 setState
 🌀合并 setState
end note

partition MOUTING {
  #82F49C:🔴getDefaultProps;
  floating note right
    只在初始化组件元素时调用
    所以只执行一次
  end note
  
  #82F49C:🔴getIntialState;

  #82F49C:🌀componentWillMount;
  floating note right
    初始化 state 等操作
    建议都在 constructor 中做处理
  end note

  #82F49C:🔴render;
  #82F49C:✅componentDidMount;
  floating note right
    有些例如获取 DOM 元素的位置等操作只有在
    渲染之后才能得到，可以在这里做处理
  end note
}

partition RECEIVE-PROPS {
  #82F49C:🌀componentWillReceiveProps;
  floating note right
    可以用来处理props改变时，更新state
  end note

  #82F49C:🔴shouleComponentUpdate;
  floating note right
    返回 true 或 false 来决定组件是否要重新渲染
    但不管是否重新渲染，属性状态都会更新
  end note

  #82F49C:🔴componentWillUpdate;
  floating note right
    在更新之前对组件的状态做保存
  end note

  #82F49C:🔴render;
  #82F49C:✅componentDidUpdate;
  floating note right
    类似 componentDidMount
  end note
}

partition UNMOUNTING {
  #82F49C:🔴componentWillUnmount;
  floating note right
    可以在这个方法中进行取消事件监听等操作
    避免内存泄漏
  end note
}


end
@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
OS Version: 3.10.0-957.1.3.el7.x86_64
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>