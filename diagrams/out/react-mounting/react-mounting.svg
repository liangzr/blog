<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1225px" preserveAspectRatio="none" style="width:1165px;height:1225px;" version="1.1" viewBox="0 0 1165 1225" width="1165px" zoomAndPan="magnify"><defs><filter height="300%" id="f1dd3i0q12voxr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="282" cy="43.6982" fill="#000000" filter="url(#f1dd3i0q12voxr)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="206.5" y="88.6982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="216.5" y="109.8369">初始化props和context</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="212" y="157.667"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="222" y="178.8057">执行构造函数获得实例</text><path d="M20,275.0381 L20,315.3037 A0,0 0 0 0 20,315.3037 L210,315.3037 A0,0 0 0 0 210,315.3037 L210,299.1709 L230,295.1709 L210,291.1709 L210,285.0381 L200,275.0381 L20,275.0381 A0,0 0 0 0 20,275.0381 " fill="#FBFB77" filter="url(#f1dd3i0q12voxr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M200,275.0381 L200,285.0381 L210,285.0381 L200,275.0381 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="26" y="292.105">无状态组件没有状态更新队列</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="26" y="307.2378">只专注于渲染</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="230" y="278.1865"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="240" y="299.3252">渲染无状态组件</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="246.5,226.6357,317.5,226.6357,329.5,238.6357,317.5,250.6357,246.5,250.6357,234.5,238.6357,246.5,226.6357" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="286" y="260.8462">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="246.5" y="242.4438">无状态组件OK</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="282,339.7061,294,351.7061,282,363.7061,270,351.7061,282,339.7061" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M360,398.7061 L360,414.8389 L340,418.8389 L360,422.8389 L360,438.9717 A0,0 0 0 0 360,438.9717 L524,438.9717 A0,0 0 0 0 524,438.9717 L524,408.7061 L514,398.7061 L360,398.7061 A0,0 0 0 0 360,398.7061 " fill="#FBFB77" filter="url(#f1dd3i0q12voxr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M514,398.7061 L514,408.7061 L524,408.7061 L514,398.7061 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="366" y="415.7729">为类抽象兜底，即使用户</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="366" y="430.9058">没有正确地调用 super()</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="224" y="401.8545"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="234" y="422.9932">重新初始化类属性</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="89" x="237.5" y="473.9717"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="247.5" y="495.1104">初始化state</text><path d="M354,542.9404 L354,566.6396 L334,570.6396 L354,574.6396 L354,598.3389 A0,0 0 0 0 354,598.3389 L567,598.3389 A0,0 0 0 0 567,598.3389 L567,552.9404 L557,542.9404 L354,542.9404 A0,0 0 0 0 354,542.9404 " fill="#FBFB77" filter="url(#f1dd3i0q12voxr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M557,542.9404 L557,552.9404 L567,552.9404 L557,542.9404 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="360" y="560.0073">_pendingStateQueue = null</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="192" x="360" y="575.1401">_pendingReplaceState = false</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="360" y="590.2729">_pendingForceUpdate = false</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="230" y="553.6553"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="240" y="574.7939">初始化更新队列</text><rect fill="#82F49C" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="207" y="1124.2529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="217" y="1145.3916">componentDidMount</text><ellipse cx="282" cy="1203.2217" fill="#FFFFFF" filter="url(#f1dd3i0q12voxr)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="275.8128" x2="288.1872" y1="1197.0345" y2="1209.4089"/><line style="stroke: #000000; stroke-width: 2.5;" x1="288.1872" x2="275.8128" y1="1197.0345" y2="1209.4089"/><rect fill="#FAEBD7" height="1200.4766" style="stroke: #FAEBD7; stroke-width: 1.0;" width="576.5" x="577" y="12.7451"/><rect fill="#82F49C" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="711.5" y="633.3389"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="721.5" y="654.4775">componentWillMount</text><path d="M587,755.1279 L587,780.2607 A0,0 0 0 0 587,780.2607 L728,780.2607 A0,0 0 0 0 728,780.2607 L728,773.1279 L748,767.6943 L728,765.1279 L728,765.1279 L718,755.1279 L587,755.1279 A0,0 0 0 0 587,755.1279 " fill="#FBFB77" filter="url(#f1dd3i0q12voxr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M718,755.1279 L718,765.1279 L728,765.1279 L718,755.1279 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="593" y="772.1948">此时不会多次render</text><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="748" y="750.71"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="758" y="771.8486">合并state</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="748,702.3076,825,702.3076,837,714.3076,825,726.3076,748,726.3076,736,714.3076,748,702.3076" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="790.5" y="736.5181">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="748" y="718.1157">更新队列不为空</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="786.5,809.0811,798.5,821.0811,786.5,833.0811,774.5,821.0811,786.5,809.0811" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="716.5" y="916.4834"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="726.5" y="937.6221">创建Component实例</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="759,868.0811,814,868.0811,826,880.0811,814,892.0811,759,892.0811,747,880.0811,759,868.0811" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="790.5" y="902.2915">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="759" y="883.8892">无状态组件</text><polygon fill="#FEFECE" filter="url(#f1dd3i0q12voxr)" points="786.5,974.8545,798.5,986.8545,786.5,998.8545,774.5,986.8545,786.5,974.8545" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M849.5,1033.8545 L849.5,1057.5537 L829.5,1061.5537 L849.5,1065.5537 L849.5,1089.2529 A0,0 0 0 0 849.5,1089.2529 L1143.5,1089.2529 A0,0 0 0 0 1143.5,1089.2529 L1143.5,1043.8545 L1133.5,1033.8545 L849.5,1033.8545 A0,0 0 0 0 849.5,1033.8545 " fill="#FBFB77" filter="url(#f1dd3i0q12voxr)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1133.5,1033.8545 L1133.5,1043.8545 L1143.5,1043.8545 L1133.5,1033.8545 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="855.5" y="1050.9214">调用 ReactReconciler.mountComponent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="855.5" y="1066.0542">递归地渲染子组件，子组件渲染成功后，父组件</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="855.5" y="1081.187">才渲染完成</text><rect fill="#82F49C" filter="url(#f1dd3i0q12voxr)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="743.5" y="1044.5693"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="753.5" y="1065.708">递归render</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="53.6982" y2="88.6982"/><polygon fill="#A80036" points="278,78.6982,282,88.6982,286,78.6982,282,82.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="122.667" y2="157.667"/><polygon fill="#A80036" points="278,147.667,282,157.667,286,147.667,282,151.667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="250.6357" y2="278.1865"/><polygon fill="#A80036" points="278,268.1865,282,278.1865,286,268.1865,282,272.1865" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="329.5" x2="344" y1="238.6357" y2="238.6357"/><polygon fill="#A80036" points="340,285.1709,344,295.1709,348,285.1709,344,289.1709" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="344" y1="238.6357" y2="351.7061"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="344" x2="294" y1="351.7061" y2="351.7061"/><polygon fill="#A80036" points="304,347.7061,294,351.7061,304,355.7061,300,351.7061" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="312.1553" y2="339.7061"/><polygon fill="#A80036" points="278,329.7061,282,339.7061,286,329.7061,282,333.7061" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="191.6357" y2="226.6357"/><polygon fill="#A80036" points="278,216.6357,282,226.6357,286,216.6357,282,220.6357" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="363.7061" y2="401.8545"/><polygon fill="#A80036" points="278,391.8545,282,401.8545,286,391.8545,282,395.8545" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="435.8232" y2="473.9717"/><polygon fill="#A80036" points="278,463.9717,282,473.9717,286,463.9717,282,467.9717" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="507.9404" y2="553.6553"/><polygon fill="#A80036" points="278,543.6553,282,553.6553,286,543.6553,282,547.6553" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="1158.2217" y2="1193.2217"/><polygon fill="#A80036" points="278,1183.2217,282,1193.2217,286,1183.2217,282,1187.2217" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="726.3076" y2="750.71"/><polygon fill="#A80036" points="782.5,740.71,786.5,750.71,790.5,740.71,786.5,744.71" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="837" x2="849" y1="714.3076" y2="714.3076"/><polygon fill="#A80036" points="845,757.6943,849,767.6943,853,757.6943,849,761.6943" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="849" x2="849" y1="714.3076" y2="821.0811"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="849" x2="798.5" y1="821.0811" y2="821.0811"/><polygon fill="#A80036" points="808.5,817.0811,798.5,821.0811,808.5,825.0811,804.5,821.0811" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="784.6787" y2="809.0811"/><polygon fill="#A80036" points="782.5,799.0811,786.5,809.0811,790.5,799.0811,786.5,803.0811" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="667.3076" y2="702.3076"/><polygon fill="#A80036" points="782.5,692.3076,786.5,702.3076,790.5,692.3076,786.5,696.3076" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="892.0811" y2="916.4834"/><polygon fill="#A80036" points="782.5,906.4834,786.5,916.4834,790.5,906.4834,786.5,910.4834" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="826" x2="866.5" y1="880.0811" y2="880.0811"/><polygon fill="#A80036" points="862.5,923.4678,866.5,933.4678,870.5,923.4678,866.5,927.4678" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="866.5" x2="866.5" y1="880.0811" y2="986.8545"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="866.5" x2="798.5" y1="986.8545" y2="986.8545"/><polygon fill="#A80036" points="808.5,982.8545,798.5,986.8545,808.5,990.8545,804.5,986.8545" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="950.4521" y2="974.8545"/><polygon fill="#A80036" points="782.5,964.8545,786.5,974.8545,790.5,964.8545,786.5,968.8545" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="833.0811" y2="868.0811"/><polygon fill="#A80036" points="782.5,858.0811,786.5,868.0811,790.5,858.0811,786.5,862.0811" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="998.8545" y2="1044.5693"/><polygon fill="#A80036" points="782.5,1034.5693,786.5,1044.5693,790.5,1034.5693,786.5,1038.5693" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="587.624" y2="610.4814"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="786.5" y1="610.4814" y2="610.4814"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="610.4814" y2="633.3389"/><polygon fill="#A80036" points="782.5,623.3389,786.5,633.3389,790.5,623.3389,786.5,627.3389" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="786.5" y1="1078.5381" y2="1101.3955"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="786.5" x2="282" y1="1101.3955" y2="1101.3955"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="282" x2="282" y1="1101.3955" y2="1124.2529"/><polygon fill="#A80036" points="278,1114.2529,282,1124.2529,286,1114.2529,282,1118.2529" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="232" x="177.5" y="29.4531">mountComponent挂载组件</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="244" x="743.25" y="29.4531">performIntialMount执行挂载</text><line style="stroke: #000000; stroke-width: 2.0;" x1="10" x2="10" y1="12.7451" y2="1213.2217"/><line style="stroke: #000000; stroke-width: 2.0;" x1="577" x2="577" y1="12.7451" y2="1213.2217"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1153.5" x2="1153.5" y1="12.7451" y2="1213.2217"/><!--
@startuml
|mountComponent挂载组件|
start

:初始化props和context;
:执行构造函数获得实例;

if (无状态组件OK) then (yes) 
  :渲染无状态组件;
  note left
    无状态组件没有状态更新队列
    只专注于渲染
  end note
endif

:重新初始化类属性;

note right
  为类抽象兜底，即使用户
  没有正确地调用 super()
end note

:初始化state;
:初始化更新队列;
note right
  _pendingStateQueue = null
  _pendingReplaceState = false
  _pendingForceUpdate = false
end note

|#FAEBD7|performIntialMount执行挂载|

#82F49C:componentWillMount;

if (更新队列不为空) then (yes) 
  :合并state;    
  note left
    此时不会多次render
  end note

endif

if (无状态组件) then (no) 
  :创建Component实例;    
endif

#82F49C:递归render;
note right
  调用 ReactReconciler.mountComponent
  递归地渲染子组件，子组件渲染成功后，父组件
  才渲染完成
end note

|mountComponent挂载组件|

#82F49C:componentDidMount;


end
@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
OS Version: 3.10.0-957.1.3.el7.x86_64
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>