<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1491px" preserveAspectRatio="none" style="width:1311px;height:1491px;" version="1.1" viewBox="0 0 1311 1491" width="1311px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pvb2ivvvmz6a" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="327" cy="43.6982" fill="#000000" filter="url(#f1pvb2ivvvmz6a)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M399,93.1162 L399,101.6826 L379,105.6826 L399,109.6826 L399,118.249 A0,0 0 0 0 399,118.249 L570,118.249 A0,0 0 0 0 570,118.249 L570,103.1162 L560,93.1162 L399,93.1162 A0,0 0 0 0 399,93.1162 " fill="#FBFB77" filter="url(#f1pvb2ivvvmz6a)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M560,93.1162 L560,103.1162 L570,103.1162 L560,93.1162 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="405" y="110.1831">nextContext, nextProps</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="275" y="88.6982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="285" y="109.8369">初始化缓存属性</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="295.5,157.667,358.5,157.667,370.5,169.667,358.5,181.667,295.5,181.667,283.5,169.667,295.5,157.667" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="295.5" y="173.4751">context改变</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="263.5" y="167.0728">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="370.5" y="167.0728">no</text><path d="M20,191.667 L20,231.9326 A0,0 0 0 0 20,231.9326 L182,231.9326 A0,0 0 0 0 182,231.9326 L182,215.7998 L202,211.7998 L182,207.7998 L182,201.667 L172,191.667 L20,191.667 A0,0 0 0 0 20,191.667 " fill="#FBFB77" filter="url(#f1pvb2ivvvmz6a)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M172,191.667 L172,201.667 L182,201.667 L172,191.667 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="26" y="208.7339">只保留被 contextTypes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="26" y="223.8667">声明的 context</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="202" y="194.8154"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="212" y="215.9541">更新处理context</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="115" x="337" y="191.667"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="95" x="347" y="212.8057">更新context缓存</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="327,237.9326,339,249.9326,327,261.9326,315,249.9326,327,237.9326" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="287" y="296.9326"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="297" y="318.0713">更新props</text><rect fill="#82F49C" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="195" x="229.5" y="454.3271"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="175" x="239.5" y="475.4658">componentWillReceiveProps</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="239,365.9014,415,365.9014,427,397.9131,415,429.9248,239,429.9248,227,397.9131,239,365.9014" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="331" y="440.1353">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="243" y="376.1118"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="247" y="388.9165">如果context或element改变</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="247" y="401.7212">&amp;&amp;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="247" y="414.5259">有componentWillReceiveProps</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="243" y="427.3306"/><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="327,512.6982,339,524.6982,327,536.6982,315,524.6982,327,512.6982" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M127.5,576.1162 L127.5,601.249 A0,0 0 0 0 127.5,601.249 L268.5,601.249 A0,0 0 0 0 268.5,601.249 L268.5,594.1162 L288.5,588.6826 L268.5,586.1162 L268.5,586.1162 L258.5,576.1162 L127.5,576.1162 A0,0 0 0 0 127.5,576.1162 " fill="#FBFB77" filter="url(#f1pvb2ivvvmz6a)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M258.5,576.1162 L258.5,586.1162 L268.5,586.1162 L258.5,576.1162 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="133.5" y="593.1831">此时不会多次render</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="77" x="288.5" y="571.6982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="298.5" y="592.8369">合并state</text><rect fill="#82F49C" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="370" x="142" y="640.667"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="350" x="152" y="661.8057">shouldUpdate: forceUpdate || shouldUpdateComponent</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="288,709.6357,366,709.6357,378,721.6357,366,733.6357,288,733.6357,276,721.6357,288,709.6357" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="288" y="725.4438">shouldUpdate</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="262" y="719.0415">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="378" y="719.0415">yes</text><path d="M58.75,753.6357 L58.75,809.0342 A0,0 0 0 0 58.75,809.0342 L127.75,809.0342 A0,0 0 0 0 127.75,809.0342 L127.75,785.335 L147.75,781.335 L127.75,777.335 L127.75,763.6357 L117.75,753.6357 L58.75,753.6357 A0,0 0 0 0 58.75,753.6357 " fill="#FBFB77" filter="url(#f1pvb2ivvvmz6a)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M117.75,753.6357 L117.75,763.6357 L127.75,763.6357 L117.75,753.6357 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="33" x="64.75" y="770.7026">state</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="64.75" y="785.8354">props</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="64.75" y="800.9683">context</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="147.75" y="764.3506"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="157.75" y="785.4893">将状态属性更新到实例上</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="327,1400.0576,339,1412.0576,327,1424.0576,315,1412.0576,327,1400.0576" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="327" cy="1469.0576" fill="#FFFFFF" filter="url(#f1pvb2ivvvmz6a)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="320.8128" x2="333.1872" y1="1462.8704" y2="1475.2448"/><line style="stroke: #000000; stroke-width: 2.5;" x1="333.1872" x2="320.8128" y1="1462.8704" y2="1475.2448"/><rect fill="#FAEBD7" height="1466.3125" style="stroke: #FAEBD7; stroke-width: 1.0;" width="331" x="580" y="12.7451"/><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="679.5" y="802.0381"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="689.5" y="823.1768">缓存当前状态属性</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="666,753.6357,809,753.6357,821,765.6357,809,777.6357,666,777.6357,654,765.6357,666,753.6357" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="741.5" y="787.8462">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="666" y="769.4438">存在componentDidUpdate</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="737.5,860.4092,749.5,872.4092,737.5,884.4092,725.5,872.4092,737.5,860.4092" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="140" x="667.5" y="967.8115"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="677.5" y="988.9502">创建Component实例</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="710,919.4092,765,919.4092,777,931.4092,765,943.4092,710,943.4092,698,931.4092,710,919.4092" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="741.5" y="953.6196">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="710" y="935.2173">无状态组件</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="737.5,1026.1826,749.5,1038.1826,737.5,1050.1826,725.5,1038.1826,737.5,1026.1826" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#82F49C" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="659" y="1085.1826"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="669" y="1106.3213">componentWillUpdate</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="661.5" y="1154.1514"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="671.5" y="1175.29">将状态属性更新到实例上</text><rect fill="#82F49C" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="157" x="659" y="1356.0889"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="137" x="669" y="1377.2275">componentDidUpdate</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="1085,1223.1201,1129,1223.1201,1141,1235.1201,1129,1247.1201,1085,1247.1201,1073,1235.1201,1085,1223.1201" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="44" x="1085" y="1238.9282">需要更新</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="1053" y="1232.5259">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1141" y="1232.5259">no</text><rect fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="1006.5" y="1257.1201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="1016.5" y="1278.2588">继续更新组件</text><rect fill="#82F49C" filter="url(#f1pvb2ivvvmz6a)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="1118.5" y="1257.1201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="66" x="1128.5" y="1278.2588">递归render</text><polygon fill="#FEFECE" filter="url(#f1pvb2ivvvmz6a)" points="1107,1297.0889,1119,1309.0889,1107,1321.0889,1095,1309.0889,1107,1297.0889" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="53.6982" y2="88.6982"/><polygon fill="#A80036" points="323,78.6982,327,88.6982,331,78.6982,327,82.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="283.5" x2="259.5" y1="169.667" y2="169.667"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="259.5" x2="259.5" y1="169.667" y2="194.8154"/><polygon fill="#A80036" points="255.5,184.8154,259.5,194.8154,263.5,184.8154,259.5,188.8154" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="370.5" x2="394.5" y1="169.667" y2="169.667"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="394.5" y1="169.667" y2="191.667"/><polygon fill="#A80036" points="390.5,181.667,394.5,191.667,398.5,181.667,394.5,185.667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="259.5" x2="259.5" y1="228.7842" y2="249.9326"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="259.5" x2="315" y1="249.9326" y2="249.9326"/><polygon fill="#A80036" points="305,245.9326,315,249.9326,305,253.9326,309,249.9326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="394.5" y1="225.6357" y2="249.9326"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="394.5" x2="339" y1="249.9326" y2="249.9326"/><polygon fill="#A80036" points="349,245.9326,339,249.9326,349,253.9326,345,249.9326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="122.667" y2="157.667"/><polygon fill="#A80036" points="323,147.667,327,157.667,331,147.667,327,151.667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="261.9326" y2="296.9326"/><polygon fill="#A80036" points="323,286.9326,327,296.9326,331,286.9326,327,290.9326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="429.9248" y2="454.3271"/><polygon fill="#A80036" points="323,444.3271,327,454.3271,331,444.3271,327,448.3271" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="427" x2="439" y1="397.9131" y2="397.9131"/><polygon fill="#A80036" points="435,451.3057,439,461.3057,443,451.3057,439,455.3057" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="439" x2="439" y1="397.9131" y2="524.6982"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="439" x2="339" y1="524.6982" y2="524.6982"/><polygon fill="#A80036" points="349,520.6982,339,524.6982,349,528.6982,345,524.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="488.2959" y2="512.6982"/><polygon fill="#A80036" points="323,502.6982,327,512.6982,331,502.6982,327,506.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="330.9014" y2="365.9014"/><polygon fill="#A80036" points="323,355.9014,327,365.9014,331,355.9014,327,359.9014" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="536.6982" y2="571.6982"/><polygon fill="#A80036" points="323,561.6982,327,571.6982,331,561.6982,327,565.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="605.667" y2="640.667"/><polygon fill="#A80036" points="323,630.667,327,640.667,331,630.667,327,634.667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="276" x2="223.75" y1="721.6357" y2="721.6357"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="223.75" x2="223.75" y1="721.6357" y2="764.3506"/><polygon fill="#A80036" points="219.75,754.3506,223.75,764.3506,227.75,754.3506,223.75,758.3506" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="223.75" x2="223.75" y1="798.3193" y2="1412.0576"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="223.75" x2="315" y1="1412.0576" y2="1412.0576"/><polygon fill="#A80036" points="305,1408.0576,315,1412.0576,305,1416.0576,309,1412.0576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="674.6357" y2="709.6357"/><polygon fill="#A80036" points="323,699.6357,327,709.6357,331,699.6357,327,703.6357" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327" x2="327" y1="1424.0576" y2="1459.0576"/><polygon fill="#A80036" points="323,1449.0576,327,1459.0576,331,1449.0576,327,1453.0576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="777.6357" y2="802.0381"/><polygon fill="#A80036" points="733.5,792.0381,737.5,802.0381,741.5,792.0381,737.5,796.0381" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="821" x2="833" y1="765.6357" y2="765.6357"/><polygon fill="#A80036" points="829,809.0225,833,819.0225,837,809.0225,833,813.0225" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="833" x2="833" y1="765.6357" y2="872.4092"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="833" x2="749.5" y1="872.4092" y2="872.4092"/><polygon fill="#A80036" points="759.5,868.4092,749.5,872.4092,759.5,876.4092,755.5,872.4092" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="836.0068" y2="860.4092"/><polygon fill="#A80036" points="733.5,850.4092,737.5,860.4092,741.5,850.4092,737.5,854.4092" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="943.4092" y2="967.8115"/><polygon fill="#A80036" points="733.5,957.8115,737.5,967.8115,741.5,957.8115,737.5,961.8115" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="777" x2="817.5" y1="931.4092" y2="931.4092"/><polygon fill="#A80036" points="813.5,974.7959,817.5,984.7959,821.5,974.7959,817.5,978.7959" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="817.5" x2="817.5" y1="931.4092" y2="1038.1826"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="817.5" x2="749.5" y1="1038.1826" y2="1038.1826"/><polygon fill="#A80036" points="759.5,1034.1826,749.5,1038.1826,759.5,1042.1826,755.5,1038.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1001.7803" y2="1026.1826"/><polygon fill="#A80036" points="733.5,1016.1826,737.5,1026.1826,741.5,1016.1826,737.5,1020.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="884.4092" y2="919.4092"/><polygon fill="#A80036" points="733.5,909.4092,737.5,919.4092,741.5,909.4092,737.5,913.4092" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1050.1826" y2="1085.1826"/><polygon fill="#A80036" points="733.5,1075.1826,737.5,1085.1826,741.5,1075.1826,737.5,1079.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1119.1514" y2="1154.1514"/><polygon fill="#A80036" points="733.5,1144.1514,737.5,1154.1514,741.5,1144.1514,737.5,1148.1514" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1073" x2="1052.5" y1="1235.1201" y2="1235.1201"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1052.5" x2="1052.5" y1="1235.1201" y2="1257.1201"/><polygon fill="#A80036" points="1048.5,1247.1201,1052.5,1257.1201,1056.5,1247.1201,1052.5,1251.1201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1141" x2="1161.5" y1="1235.1201" y2="1235.1201"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1161.5" x2="1161.5" y1="1235.1201" y2="1257.1201"/><polygon fill="#A80036" points="1157.5,1247.1201,1161.5,1257.1201,1165.5,1247.1201,1161.5,1251.1201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1052.5" x2="1052.5" y1="1291.0889" y2="1309.0889"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1052.5" x2="1095" y1="1309.0889" y2="1309.0889"/><polygon fill="#A80036" points="1085,1305.0889,1095,1309.0889,1085,1313.0889,1089,1309.0889" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1161.5" x2="1161.5" y1="1291.0889" y2="1309.0889"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1161.5" x2="1119" y1="1309.0889" y2="1309.0889"/><polygon fill="#A80036" points="1129,1305.0889,1119,1309.0889,1129,1313.0889,1125,1309.0889" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1188.1201" y2="1205.6201"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="1107" y1="1205.6201" y2="1205.6201"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1107" x2="1107" y1="1205.6201" y2="1223.1201"/><polygon fill="#A80036" points="1103,1213.1201,1107,1223.1201,1111,1213.1201,1107,1217.1201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1107" x2="1107" y1="1321.0889" y2="1338.5889"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1107" x2="737.5" y1="1338.5889" y2="1338.5889"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1338.5889" y2="1356.0889"/><polygon fill="#A80036" points="733.5,1346.0889,737.5,1356.0889,741.5,1346.0889,737.5,1350.0889" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="378" x2="737.5" y1="721.6357" y2="721.6357"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="721.6357" y2="753.6357"/><polygon fill="#A80036" points="733.5,743.6357,737.5,753.6357,741.5,743.6357,737.5,747.6357" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="737.5" y1="1390.0576" y2="1412.0576"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="737.5" x2="339" y1="1412.0576" y2="1412.0576"/><polygon fill="#A80036" points="349,1408.0576,339,1412.0576,349,1416.0576,345,1412.0576" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="236" x="177" y="29.4531">updateComponent更新组件</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="311" x="590" y="29.4531">performComponentUpdate执行更新</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="368" x="921" y="29.4531">_updateRenderedComponent执行渲染更新</text><line style="stroke: #000000; stroke-width: 2.0;" x1="10" x2="10" y1="12.7451" y2="1479.0576"/><line style="stroke: #000000; stroke-width: 2.0;" x1="580" x2="580" y1="12.7451" y2="1479.0576"/><line style="stroke: #000000; stroke-width: 2.0;" x1="911" x2="911" y1="12.7451" y2="1479.0576"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1299" x2="1299" y1="12.7451" y2="1479.0576"/><!--
@startuml
|updateComponent更新组件|
start

:初始化缓存属性;
note right
  nextContext, nextProps
end note

if (context改变) then (yes) 
  :更新处理context;
  note left
    只保留被 contextTypes
    声明的 context
  end note
else (no)
  :更新context缓存;
endif

:更新props;

if (
  如果context或element改变 
  &&
  有componentWillReceiveProps
) then (yes) 
  #82F49C:componentWillReceiveProps;

endif

:合并state;
note left
  此时不会多次render
end note

#82F49C:shouldUpdate: forceUpdate || shouldUpdateComponent;

if (shouldUpdate) then (no) 
  :将状态属性更新到实例上;
  note left
    state
    props
    context
  end note
else (yes)
  |#FAEBD7|performComponentUpdate执行更新|
  if (存在componentDidUpdate) then (yes) 
    :缓存当前状态属性;    
  endif

  if (无状态组件) then (no) 
    :创建Component实例;    
  endif

  #82F49C:componentWillUpdate;
  :将状态属性更新到实例上;

  |_updateRenderedComponent执行渲染更新|
  
  if (需要更新) then (yes) 
    :继续更新组件;    
  else (no)
    #82F49C:递归render;
  endif
  
  |#FAEBD7|performComponentUpdate执行更新|
  #82F49C:componentDidUpdate;
  
endif

|updateComponent更新组件|

end
@enduml

PlantUML version 1.2019.04(Fri Mar 29 15:44:36 UTC 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-8u212-b01-1~deb9u1-b01
Operating System: Linux
OS Version: 3.10.0-957.1.3.el7.x86_64
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>